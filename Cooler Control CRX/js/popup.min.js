window.onload=function(){var e=document.getElementById("switchOn"),a=document.getElementById("switchOff"),l=document.getElementById("home"),s=document.getElementById("cooler"),t=document.getElementById("other"),n=document.getElementById("hours"),c=document.getElementById("minutes"),i=document.getElementById("seconds"),o=document.getElementById("setTimer"),d=document.getElementById("lastseen"),u="",r=!1;function m(e,a){var l=new XMLHttpRequest;l.onreadystatechange=function(){4==l.readyState&&200==l.status&&a(l.responseText),console.log(l.responseText)},l.open("GET",e,!0),l.setRequestHeader("Access-Control-Allow-Origin","*"),l.send(null)}function v(){m(u.concat("/status"),function(l){var s=1==parseInt(l.split(" ")[1]);r=parseInt(l.split(" ")[0])>0,s?(e.disabled=!0,e.className="",a.disabled=!1,a.className="available"):(e.disabled=!1,e.className="available",a.disabled=!0,a.className=""),r&&(o.innerHTML="Cancel Timer",o.disabled=!1,o.className="available")})}function b(){""!=n.value&&"0"!=n.value||""!=c.value&&"0"!=c.value||""!=i.value&&"0"!=i.value?(o.disabled=!1,o.className="available",o.innerHTML="Set Timer"):r?(o.innerHTML="Cancel Timer",o.className="available"):(o.disabled=!0,o.className="",o.innerHTML="Set Timer")}chrome.storage.local.get(["key"],function(e){console.log(e.key),e.key?(0==e.key&&(l.disabled=!0,s.className="available",t.className="available"),1==e.key?(s.disabled=!0,l.className="available",t.className="available"):(t.disabled=!0,s.className="available",l.className="available")):(t.disabled=!0,s.className="available",l.className="available")}),o.disabled=!0,m("http://192.168.43.146/status",function(e){u="http://192.168.43.146",v()}),m("http://192.168.43.246/status",function(e){u="http://192.168.43.246",v()}),m("https://dictionary.ml/.netlify/functions/alternate",function(e){d.innerHTML=e,d.style.display="inline-block"}),a.addEventListener("click",function(){m(u.concat("/off"),function(){}),e.disabled=!1,e.className="available",a.disabled=!0,a.className=""}),e.addEventListener("click",function(){m(u.concat("/on"),function(){}),e.disabled=!0,e.className="",a.disabled=!1,a.className="available"}),l.addEventListener("click",function(){u="http://192.168.15.100",console.log(u.concat(" selected")),l.disabled=!0,l.className="",s.disabled=!1,s.className="available",t.disabled=!1,t.className="available",chrome.storage.local.set({key:0},function(){console.log("Value is set to 0")}),v()}),s.addEventListener("click",function(){u="http://192.168.4.1",console.log(u.concat(" selected")),l.disabled=!1,l.className="available",s.disabled=!0,s.className="",t.disabled=!1,t.className="available",chrome.storage.local.set({key:1},function(){console.log("Value is set to 1")}),v()}),t.addEventListener("click",function(){m("http://192.168.43.146/status",function(e){u="http://192.168.43.146"}),m("http://192.168.43.246/status",function(e){u="http://192.168.43.246"}),console.log(u.concat(" selected")),t.disabled=!0,t.className="",l.disabled=!1,l.className="available",s.disabled=!1,s.className="available",chrome.storage.local.set({key:2},function(){console.log("Value is set to 2")}),v()}),n.addEventListener("keyup",function(){b()}),c.addEventListener("keyup",function(){b()}),i.addEventListener("keyup",function(){b()}),n.addEventListener("mouseup",function(){b()}),c.addEventListener("mouseup",function(){b()}),i.addEventListener("mouseup",function(){b()}),o.addEventListener("click",function(){if("Cancel Timer"!=o.innerHTML)if(""!=n.value&&"0"!=n.value||""!=c.value&&"0"!=c.value||""!=i.value&&"0"!=i.value){var e=3;""==n.value&&(n.value="0",e-=1),""==c.value&&(c.value="0",e-=1),""==i.value&&(i.value="0",e-=1);var a=(3600*parseInt(n.value)+60*parseInt(c.value)+parseInt(i.value)).toString();m(u.concat("/setTimer?secs=",a),function(){}),o.innerHTML="Cancel Timer",hrs_phrase="",min_phrase="",sec_phrase="",1==n.value&&(hrs_phrase="1 hour "),1==c.value&&(min_phrase=" 1 minute "),1==i.value&&(sec_phrase=" 1 second"),n.value>1&&(hrs_phrase=n.value.concat(" hours ")),c.value>1&&(min_phrase=c.value.concat(" minutes ")),i.value>1&&(sec_phrase=i.value.concat(" seconds"));var l="Timer set for ".concat(hrs_phrase,min_phrase,sec_phrase);if(l=l.trim(),1==e&&(l=l.concat(".")),2==e){var s=l.split(" ");l=s[0].concat(" ",s[1]," ",s[2]," ",s[3].concat(" ",s[4]," and ",s[5]," ",s[6],"."))}if(3==e){s=l.split(" ");l=s[0].concat(" ",s[1]," ",s[2]," ",s[3].concat(" ",s[4],", ",s[5]," ",s[6]," and ",s[7]," ",s[8],"."))}alert(l),n.value="",c.value="",i.value=""}else o.className="",o.disabled=!0;else m(u.concat("/cancel"),function(){}),o.innerHTML="Set Timer",o.disabled=!0,o.className=""})};